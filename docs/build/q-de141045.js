import{h as r,F as o,H as l,x as a}from"./q-3396b8e1.js";import{C as n}from"./q-5fedfe40.js";const d=[{text:"Middleware",id:"middleware",level:1},{text:"Middleware Function",id:"middleware-function",level:2},{text:"Order of invocation",id:"order-of-invocation",level:2},{text:"Component as an HTML Endpoint",id:"component-as-an-html-endpoint",level:2},{text:"RequestEvent",id:"requestevent",level:2},{text:"next()",id:"next",level:3},{text:"sharedMap",id:"sharedmap",level:3},{text:"headers",id:"headers",level:3},{text:"cookie",id:"cookie",level:3},{text:"method",id:"method",level:3},{text:"url",id:"url",level:3},{text:"basePathname",id:"basepathname",level:3},{text:"params",id:"params",level:3},{text:"query",id:"query",level:3},{text:"parseBody()",id:"parsebody",level:3},{text:"cacheControl",id:"cachecontrol",level:3},{text:"platform",id:"platform",level:3},{text:"locale()",id:"locale",level:3},{text:"status()",id:"status",level:3},{text:"redirect()",id:"redirect",level:3},{text:"error()",id:"error",level:3},{text:"text()",id:"text",level:3},{text:"html()",id:"html",level:3},{text:"json()",id:"json",level:3},{text:"send()",id:"send",level:3},{text:"exit()",id:"exit",level:3},{text:"env",id:"env",level:3},{text:"getWritableStream()",id:"getwritablestream",level:3},{text:"headerSent",id:"headersent",level:3},{text:"request",id:"request",level:3}],h={title:"Middleware | Guides",meta:[],styles:[],links:[],frontmatter:{contributors:["adamdbradley","manucorporat","mhevery"]}},p={title:"Middleware | Guides",contributors:["adamdbradley","manucorporat","mhevery"]};function c(s){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",h2:"h2",code:"code",div:"div",pre:"pre",h3:"h3"},s.components);return l(a,{children:[l(e.h1,{id:"middleware",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#middleware",children:l(e.span,{class:"icon icon-link"})}),"Middleware"]}),`
`,l(e.p,{children:"Qwik City comes with server middleware that allows you to centralize and chain logic such as authentication, security, caching, redirects, and logging. Middleware can also be used to define endpoints. Endpoints are useful for returning data such as  RESTful API, or GraphQL API."}),`
`,l(e.p,{children:["Middleware consists of a set of functions that are called in a specific order defined by the route. A middleware which returns a response is called an ",l(e.a,{href:"/docs/endpoints/",children:"endpoint"}),"."]}),`
`,l(e.h2,{id:"middleware-function",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#middleware-function",children:l(e.span,{class:"icon icon-link"})}),"Middleware Function"]}),`
`,l(e.p,{children:["Middleware is defined by exporting a function called ",l(e.code,{children:"onRequest"})," (or ",l(e.code,{children:"onGet"}),", ",l(e.code,{children:"onPost"}),", ",l(e.code,{children:"onPut"}),", ",l(e.code,{children:"onPatch"}),", and ",l(e.code,{children:"onDelete"}),") in the ",l(e.code,{children:"layout.tsx"})," or ",l(e.code,{children:"index.tsx"})," file inside of ",l(e.code,{children:"src/routes"})," folder."]}),`
`,l(e.p,{children:["This example shows a simple ",l(e.code,{children:"onRequest"})," middleware function that logs all requests."]}),`
`,l(e.p,{children:["File: ",l(e.code,{children:"src/routes/layout.tsx"})]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"typescript","data-theme":"default",children:l(e.code,{"data-language":"typescript","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:" "})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({"}),l(e.span,{style:{color:"#9CDCFE"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:"}) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"console"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Before request'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"console"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'After request'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})}),`
`,l(e.p,{children:["If you want to intercept a specific HTTP method you can use one of these variations. If you use both ",l(e.code,{children:"onRequest"})," and ",l(e.code,{children:"onGet"})," for example then both will execute but ",l(e.code,{children:"onRequest"})," will execute before ",l(e.code,{children:"onGet"})," in the chain."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"typescript","data-theme":"default",children:l(e.code,{"data-language":"typescript","data-theme":"default",children:[l(e.span,{class:"line",children:l(e.span,{style:{color:"#6A9955"},children:"// Called only with a specific HTTP method"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... }"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onPost"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... }"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onPut"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... }"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onPatch"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... }"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onDelete"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... }"})]})]})})}),`
`,l(e.p,{children:["Each middleware function is passed a ",l(e.a,{href:"#requestevent",children:l(e.code,{children:"RequestEvent"})})," object which allows the middleware to control the response."]}),`
`,l(e.h2,{id:"order-of-invocation",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#order-of-invocation",children:l(e.span,{class:"icon icon-link"})}),"Order of invocation"]}),`
`,l(e.p,{children:["The order middleware function chain is determined by their location. Starting from the topmost ",l(e.code,{children:"layout.tsx"})," and ending at the ",l(e.code,{children:"index.tsx"})," for a given route. (Same resolution logic as the order of layout and route component as defined by the route path.)"]}),`
`,l(e.p,{children:["For example, if the request is ",l(e.code,{children:"/api/greet/"})," in the following folder structure, the invocation order is as follows:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:l(e.span,{style:{color:"#DCDCAA"},children:"src/"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"routes/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"layout.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"            "}),l(e.span,{style:{color:"#6A9955"},children:"# Invocation order: 1 (first)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"api/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#DCDCAA"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"layout.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#6A9955"},children:"# Invocation order: 2   "})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"greet/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"            "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"index.ts"}),l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#6A9955"},children:"# Invocation order: 3 (last)"})]})]})})}),`
`,l(e.p,{children:["Qwik City looks into each file in order and checks to see if it has ",l(e.code,{children:"onRequest"})," (or ",l(e.code,{children:"onGet"}),", ",l(e.code,{children:"onPost"}),", ",l(e.code,{children:"onPut"}),", ",l(e.code,{children:"onPatch"}),", and ",l(e.code,{children:"onDelete"}),") exported functions. If found the function gets added into the middleware execution chain in that order."]}),`
`,l(e.p,{children:[l(e.code,{children:"routeLoader$"})," and ",l(e.code,{children:"routeAction$"})," are also considered part of the middleware and they execute after the ",l(e.code,{children:"on*"})," functions and before the default exported component."]}),`
`,l(e.h2,{id:"component-as-an-html-endpoint",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#component-as-an-html-endpoint",children:l(e.span,{class:"icon icon-link"})}),"Component as an HTML Endpoint"]}),`
`,l(e.p,{children:["You can think of component rendering as an implicit HTML endpoint. Therefore if ",l(e.code,{children:"index.tsx"})," has a default export component, then the component implicitly becomes an endpoint in the middleware chain. Because component rendering is part of the middleware chain this allows you to intercept component rendering, for example as part of authentication, logging or other cross-cutting concerns."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/component/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"redirect"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" (!"}),l(e.span,{style:{color:"#DCDCAA"},children:"isLoggedIn"}),l(e.span,{style:{color:"#D4D4D4"},children:"()) {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"redirect"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"308"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'/login'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"You are logged in."}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"function"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"isLoggedIn"}),l(e.span,{style:{color:"#D4D4D4"},children:"() {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"true"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#6A9955"},children:"// Mock login as true"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})})]})})})}),`
`,l(e.h2,{id:"requestevent",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#requestevent",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"RequestEvent"})]}),`
`,l(e.p,{children:["All middleware functions are passed a ",l(e.code,{children:"RequestEvent"})," object which can be used to control the flow of HTTP response. For example, you can read/write cookies, headers, redirect, produce responses and exit the middleware chain early. Middleware functions are executed in the order as described above, from the topmost ",l(e.code,{children:"layout.tsx"})," to the last ",l(e.code,{children:"index.tsx"}),"."]}),`
`,l(e.h3,{id:"next",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#next",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"next()"})]}),`
`,l(e.p,{children:["Use the ",l(e.code,{children:"next()"})," function to execute the next middleware function in the chain. This is the default behavior when a middleware function returns normally, without an explicit call to ",l(e.code,{children:"next()"}),". One can use the ",l(e.code,{children:"next()"})," function to achieve a wrapping behavior around the next middleware function."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/next/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#6A9955"},children:"// Generic function `onRequest` is executed first"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"[] = [];"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"set"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'log'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onRequest start'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,class:"word",children:[l(e.span,{style:{color:"#DCDCAA"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"})]}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#6A9955"},children:"// Execute next middleware function (onGet)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onRequest end'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#6A9955"},children:"// Specific functions such as `onGet` are executed next"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'log'"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#C586C0"},children:"as"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"[];"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onGET start'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#6A9955"},children:"// execute next middleware function"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#6A9955"},children:"// (in our case, there are no more middleware functions nor components.)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,class:"word",children:[l(e.span,{style:{color:"#DCDCAA"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"})]}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onGET end'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.p,{children:["In general, a normal (non-exception) return of a function will execute the next function in the chain. However, throwing an error from the function will stop the execution chain. This is typically used for authentication or authorization and returning a ",l(e.code,{children:"401"})," or ",l(e.code,{children:"403"})," HTTP status code. Because the ",l(e.code,{children:"next()"})," is implicit, to prevent calling the next middleware function in the chain it is necessary to ",l(e.code,{children:"throw"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/throw/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"[] = [];"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"set"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'log'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onRequest'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#DCDCAA"},children:"isLoggedIn"}),l(e.span,{style:{color:"#D4D4D4"},children:"()) {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#6A9955"},children:"// normal behavior call next middleware"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,class:"word",children:[l(e.span,{style:{color:"#DCDCAA"},children:"next"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"})]}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  } "}),l(e.span,{style:{color:"#C586C0"},children:"else"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#6A9955"},children:"// If not logged in throw to prevent implicit call to the next middleware."})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"404"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'log'"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#C586C0"},children:"as"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"[];"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'onGET'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"function"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"isLoggedIn"}),l(e.span,{style:{color:"#D4D4D4"},children:"() {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#6A9955"},children:"// always return false as mock example"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})})]})})})}),`
`,l(e.h3,{id:"sharedmap",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#sharedmap",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"sharedMap"})]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"sharedMap"})," as a way to share data between middleware functions. The ",l(e.code,{children:"sharedMap"})," is scoped to HTTP request. A common use case is to use ",l(e.code,{children:"sharedMap"})," to store user details so that it can be used by other middleware functions, ",l(e.code,{children:"routeLoader$()"})," or components."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/sharedMap/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"routeLoader$"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"Cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"} "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"interface"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"User"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"username"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"email"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"send"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"}) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"user"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"loadUserFromCookie"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"user"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"set"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'user'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"user"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  } "}),l(e.span,{style:{color:"#C586C0"},children:"else"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"send"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"401"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'NOT_AUTHORIZED'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"function"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"loadUserFromCookie"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:"): "}),l(e.span,{style:{color:"#4EC9B0"},children:"User"}),l(e.span,{style:{color:"#D4D4D4"},children:" | "}),l(e.span,{style:{color:"#4EC9B0"},children:"null"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#6A9955"},children:"// this is where you would check cookie for user."})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#6A9955"},children:"// just return mock user for this demo."})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#9CDCFE"},children:"username:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"`Mock User`"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#9CDCFE"},children:"email:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"`mock@users.com`"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    };"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  } "}),l(e.span,{style:{color:"#C586C0"},children:"else"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"null"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"useUser"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"routeLoader$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'user'"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#C586C0"},children:"as"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"User"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useUser"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"username"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"email"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:")"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})})}),`
`,l(e.h3,{id:"headers",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#headers",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"headers"})]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"headers"}),` to set response headers associated with the current request.
(For reading request headers see `,l(e.a,{href:"#request",children:l(e.code,{children:"request.headers"})}),".) Middleware can manually add response headers to the response, using the ",l(e.code,{children:"headers"})," property."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/headers/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"set"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'X-SRF-TOKEN'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"Math"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"random"}),l(e.span,{style:{color:"#D4D4D4"},children:"()."}),l(e.span,{style:{color:"#DCDCAA"},children:"toString"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"36"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"replace"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'0.'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Record"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"> = {};"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"forEach"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"key"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"key"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"cookie",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#cookie",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"cookie"})]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"cookie"})," to set and retrieve cookie information for a request. Middleware can manually read and set cookies, using the ",l(e.code,{children:"cookie"})," function. This might be useful for setting a session cookie, such as a JWT token, or a cookie to track a user."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/cookie/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"let"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Qwik.demo.count'"}),l(e.span,{style:{color:"#D4D4D4"},children:")?."}),l(e.span,{style:{color:"#DCDCAA"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:"() || "}),l(e.span,{style:{color:"#B5CEA8"},children:"0"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"++;"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"cookie"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"set"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Qwik.demo.count'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"method",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#method",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"method"})]}),`
`,l(e.p,{children:["Returns current HTTP request method: ",l(e.code,{children:"GET"}),", ",l(e.code,{children:"POST"}),", ",l(e.code,{children:"PATCH"}),", ",l(e.code,{children:"PUT"}),", ",l(e.code,{children:"DELETE"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/method/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"method"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"method"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"url",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#url",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"url"})]}),`
`,l(e.p,{children:["Returns current HTTP request URL. (Use ",l(e.code,{children:"useLocation()"})," if you need the current URL in a component. The ",l(e.code,{children:"url"})," is meant for middleware functions.)"]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/url/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"url:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"toString"}),l(e.span,{style:{color:"#D4D4D4"},children:"() });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"basepathname",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#basepathname",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"basePathname"})]}),`
`,l(e.p,{children:["Returns the current base pathname URL of where the application is mounted. Typically this is ",l(e.code,{children:"/"})," but it can be different if the application is mounted in a sub-path. See vite ",l(e.code,{children:"qwikCity({root: '/my-sub-path-location'})"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/basePathname/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"basePathname"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"basePathname"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"params",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#params",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"params"})]}),`
`,l(e.p,{children:['Retrieve the "params" of the URL. For example ',l(e.code,{children:"params.myId"})," will allow you to retrieve the ",l(e.code,{children:"myId"})," from this route definition ",l(e.code,{children:"/base/[myId]/something"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/params/[myId]/index.tsx",url:"/src/routes/demo/qwikcity/middleware/params/some-id/",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"params"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"params"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"query",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#query",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"query"})]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"query"})," to retrieve the URL query parameters. (This is a shorthand for ",l(e.code,{children:"url.searchParams"}),".) It is provided for the middleware functions, and components should use ",l(e.code,{children:"useLocation()"})," API."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/query/index.tsx",url:"/src/routes/demo/qwikcity/middleware/query/?someKey=someValue",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"query"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Record"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"> = {};"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"query"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"forEach"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"v"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"k"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"k"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"v"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"parsebody",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#parsebody",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"parseBody()"})]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"parseBody()"})," to parse form data submitted to the URL."]}),`
`,l(e.p,{children:["This method will check the request headers for a ",l(e.code,{children:"Content-Type"})," header and parse the body accordingly. It supports ",l(e.code,{children:"application/json"}),", ",l(e.code,{children:"application/x-www-form-urlencoded"}),", and ",l(e.code,{children:"multipart/form-data"})," content types."]}),`
`,l(e.p,{children:["If the ",l(e.code,{children:"Content-Type"})," header is not set, it will return ",l(e.code,{children:"null"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/parseBody/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"html"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"html"}),l(e.span,{style:{color:"#D4D4D4"},children:"("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#CE9178"},children:"`"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:'      <form id="myForm" method="POST">'})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:'        <input type="text" name="project" value="Qwik"/>'})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:'        <input type="text" name="url" value="http://qwik.builder.io"/>'})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"      </form>"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"      <script>myForm.submit()<\/script>`"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onPost"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"parseBody"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"body:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"parseBody"}),l(e.span,{style:{color:"#D4D4D4"},children:"() });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"cachecontrol",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#cachecontrol",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"cacheControl"})]}),`
`,l(e.p,{children:"Convenience API for setting the cache header."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/cacheControl/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"cacheControl"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"}) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"cacheControl"}),l(e.span,{style:{color:"#D4D4D4"},children:"({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"maxAge:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#B5CEA8"},children:"42"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"public:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"true"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Record"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"> = {};"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"forEach"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"key"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"key"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"platform",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#platform",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"platform"})]}),`
`,l(e.p,{children:"Deployment platform (Azure, Cloudflare, Deno, Google Cloud Run, Netlify, Node.js, Vercel, etc...) specific API."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/platform/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"platform"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"Object"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"keys"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"platform"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"locale",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#locale",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"locale()"})]}),`
`,l(e.p,{children:"Set or retrieve the current locale."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/locale/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"locale"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"request"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"acceptLanguage"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"request"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'accept-language'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" ["}),l(e.span,{style:{color:"#4FC1FF"},children:"languages"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"acceptLanguage"}),l(e.span,{style:{color:"#D4D4D4"},children:"?."}),l(e.span,{style:{color:"#DCDCAA"},children:"split"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"';'"}),l(e.span,{style:{color:"#D4D4D4"},children:") || ["}),l(e.span,{style:{color:"#CE9178"},children:"'?'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'?'"}),l(e.span,{style:{color:"#D4D4D4"},children:"];"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" ["}),l(e.span,{style:{color:"#4FC1FF"},children:"preferredLanguage"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"languages"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"split"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"','"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"locale"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"preferredLanguage"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"locale"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"locale:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"locale"}),l(e.span,{style:{color:"#D4D4D4"},children:"() });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"status",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#status",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"status()"})]}),`
`,l(e.p,{children:["Set the status of the response independently of writing the response, useful for streaming. Endpoints can manually change the HTTP status code of the response, using the ",l(e.code,{children:"status()"})," method."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/status/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"status"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"getWritableStream"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"status"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"stream"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"getWritableStream"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"stream"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"getWriter"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"write"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"TextEncoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"()."}),l(e.span,{style:{color:"#DCDCAA"},children:"encode"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Hello World!'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"close"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"redirect",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#redirect",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"redirect()"})]}),`
`,l(e.p,{children:["Redirect to a new URL. Notice the importance of throwing to prevent other middleware functions from running. The ",l(e.code,{children:"redirect()"})," method will automatically set the ",l(e.code,{children:"Location"})," header to the redirect URL."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/redirect/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"redirect"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"redirect"}),l(e.span,{style:{color:"#D4D4D4"},children:"("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#B5CEA8"},children:"308"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"URL"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'/demo/qwikcity/middleware/status/'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"url"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"toString"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"error",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#error",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"error()"})]}),`
`,l(e.p,{children:"Set an error response."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/error/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"error"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"error"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"500"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'ERROR: Demonstration of an error response.'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"text",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#text",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"text()"})]}),`
`,l(e.p,{children:["Send a text-based response. Creating a text endpoint is as simple as calling the ",l(e.code,{children:"text(status, string)"})," method. The ",l(e.code,{children:"text()"})," method will automatically set the ",l(e.code,{children:"Content-Type"})," header to ",l(e.code,{children:"text/plain; charset=utf-8"}),"."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/text/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'Text based response.'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"html",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#html",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"html()"})]}),`
`,l(e.p,{children:"Send an HTML response."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/html/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"html"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"html"}),l(e.span,{style:{color:"#D4D4D4"},children:"("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#CE9178"},children:"` "})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"      <html>"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"        <body>"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"          <h1>HTML response</h1>"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"        </body>"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#CE9178"},children:"      </html>`"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"json",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#json",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"json()"})]}),`
`,l(e.p,{children:["Creating a JSON endpoint is as simple as calling the ",l(e.code,{children:"json(status, object)"})," method. The ",l(e.code,{children:"json()"})," method will automatically set the ",l(e.code,{children:"Content-Type"})," header to ",l(e.code,{children:"application/json; charset=utf-8"})," and JSON stringify the data."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/json/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"hello:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'world'"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"send",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#send",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"send()"})]}),`
`,l(e.p,{children:["Creating a raw endpoint is as simple as calling the ",l(e.code,{children:"send(Response)"})," method. The ",l(e.code,{children:"send()"})," method takes a standard ",l(e.code,{children:"Response"})," object, which can be created using the ",l(e.code,{children:"Response"})," constructor."]}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/send/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"response"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"Response"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Hello World'"}),l(e.span,{style:{color:"#D4D4D4"},children:", {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"status:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers:"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#CE9178"},children:"'Content-Type'"}),l(e.span,{style:{color:"#9CDCFE"},children:":"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'text/plain'"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    },"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"send"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"response"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"exit",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#exit",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"exit()"})]}),`
`,l(e.p,{children:"Throw to stop the execution of the middleware functions."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/exit/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"exit"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"throw"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"exit"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"env",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#env",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"env"})]}),`
`,l(e.p,{children:"Retrieve environmental property in a platform-independent way."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/env/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"USER:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'USER'"}),l(e.span,{style:{color:"#D4D4D4"},children:"),"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"MODE_ENV:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'MODE_ENV'"}),l(e.span,{style:{color:"#D4D4D4"},children:"),"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"PATH:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'PATH'"}),l(e.span,{style:{color:"#D4D4D4"},children:"),"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"SHELL:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'SHELL'"}),l(e.span,{style:{color:"#D4D4D4"},children:"),"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"getwritablestream",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#getwritablestream",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"getWritableStream()"})]}),`
`,l(e.p,{children:"Set stream response."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/getWritableStream/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"writableStream"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEvent"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"getWritableStream"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"writableStream"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"getWriter"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"encoder"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"TextEncoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"write"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"encoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"encode"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Hello World'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"wait"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"100"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"write"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"encoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"encode"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'After 100ms'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"wait"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"100"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"write"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"encoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"encode"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'After 200ms'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"wait"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"100"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"write"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"encoder"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"encode"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'END'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"writer"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"close"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"wait"}),l(e.span,{style:{color:"#D4D4D4"},children:" = ("}),l(e.span,{style:{color:"#9CDCFE"},children:"ms"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"Promise"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"resolve"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"resolve"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"ms"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]})]})})})}),`
`,l(e.h3,{id:"headersent",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#headersent",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"headerSent"})]}),`
`,l(e.p,{children:"Check to see if the header has been set."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/headerSent/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"headersSent"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" (!"}),l(e.span,{style:{color:"#9CDCFE"},children:"headersSent"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"response:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'default response'"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onRequest"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"status"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"status"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})}),`
`,l(e.h3,{id:"request",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#request",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"request"})]}),`
`,l(e.p,{children:"Get the HTTP request object. Useful for getting hold of the request data such as the headers."}),`
`,l(n,{src:"/src/routes/demo/qwikcity/middleware/request/index.tsx",children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"onGet"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"request"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Record"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#4EC9B0"},children:"string"}),l(e.span,{style:{color:"#D4D4D4"},children:"> = {};"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"request"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"headers"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"forEach"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"v"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"k"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"k"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#9CDCFE"},children:"v"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"json"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"200"}),l(e.span,{style:{color:"#D4D4D4"},children:", { "}),l(e.span,{style:{color:"#9CDCFE"},children:"headers:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"obj"}),l(e.span,{style:{color:"#D4D4D4"},children:" });"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})})})]})}function i(s={}){const{wrapper:e}=s.components||{};return e?l(e,Object.assign({},s,{children:l(c,s)})):c(s)}const y=()=>r(o,{children:r(i,{},3,null)},3,"Bm0s5gFY");export{y as default,p as frontmatter,h as head,d as headings};
