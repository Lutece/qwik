import{h as s,F as c,H as e,x as o}from"./q-3396b8e1.js";const i=[{text:"Content Security Policy",id:"content-security-policy",level:1},{text:"What is CSP?",id:"what-is-csp",level:2},{text:"Steps to integrate",id:"steps-to-integrate",level:2},{text:"Add a route plugin",id:"add-a-route-plugin",level:3},{text:"Example",id:"example",level:4},{text:"Add it to the service worker as well",id:"add-it-to-the-service-worker-as-well",level:3},{text:"Custom scripts",id:"custom-scripts",level:3},{text:"Validate your CSP",id:"validate-your-csp",level:2}],d={title:"Content Security Policy | Advanced",meta:[],styles:[],links:[],frontmatter:{contributors:["tzdesign","jordanw66"]}},h={title:"Content Security Policy | Advanced",contributors:["tzdesign","jordanw66"]};function r(n){const l=Object.assign({h1:"h1",a:"a",span:"span",h2:"h2",p:"p",h3:"h3",code:"code",div:"div",pre:"pre",h4:"h4",blockquote:"blockquote"},n.components);return e(o,{children:[e(l.h1,{id:"content-security-policy",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#content-security-policy",children:e(l.span,{class:"icon icon-link"})}),"Content Security Policy"]}),`
`,e(l.h2,{id:"what-is-csp",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#what-is-csp",children:e(l.span,{class:"icon icon-link"})}),"What is CSP?"]}),`
`,e(l.p,{children:[e(l.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP",children:"Content Security Policy (CSP)"})," is an added layer of security that helps to detect and mitigate certain types of attacks, including Cross-Site Scripting (XSS) and data injection attacks. These attacks are used for everything from data theft, to site defacement, to malware distribution."]}),`
`,e(l.h2,{id:"steps-to-integrate",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#steps-to-integrate",children:e(l.span,{class:"icon icon-link"})}),"Steps to integrate"]}),`
`,e(l.h3,{id:"add-a-route-plugin",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#add-a-route-plugin",children:e(l.span,{class:"icon icon-link"})}),"Add a route plugin"]}),`
`,e(l.p,{children:["To add the middleware plugin to your application, simply add a file named ",e(l.code,{children:"plugin@your-plugin-name.ts"}),` to the routes folder.
This file will be loaded with every request, allowing you to add headers, modify the response, and more.`]}),`
`,e(l.div,{"data-rehype-pretty-code-fragment":"",children:[e(l.div,{"data-rehype-pretty-code-title":"","data-language":"bash","data-theme":"default",children:"Add the plugin"}),e(l.pre,{"data-language":"bash","data-theme":"default",children:e(l.code,{"data-language":"bash","data-theme":"default",children:[e(l.span,{class:"line",children:e(l.span,{style:{color:"#DCDCAA"},children:"src/"})}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#DCDCAA"},children:"└──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"routes/"})]}),`
`,e(l.span,{class:"line line--highlighted",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"├──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},class:"word",children:"plugin@csp.ts"}),e(l.span,{style:{color:"#D4D4D4"},children:"         "}),e(l.span,{style:{color:"#6A9955"},children:"# The plugin which runs on every request (route middleware)"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"├──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"contact/"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"│"}),e(l.span,{style:{color:"#D4D4D4"},children:"   "}),e(l.span,{style:{color:"#CE9178"},children:"└──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"index.mdx"}),e(l.span,{style:{color:"#D4D4D4"},children:"         "}),e(l.span,{style:{color:"#6A9955"},children:"# https://example.com/contact"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"├──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"about/"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"│"}),e(l.span,{style:{color:"#D4D4D4"},children:"   "}),e(l.span,{style:{color:"#CE9178"},children:"└──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"index.md"}),e(l.span,{style:{color:"#D4D4D4"},children:"          "}),e(l.span,{style:{color:"#6A9955"},children:"# https://example.com/about"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"├──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"index.mdx"}),e(l.span,{style:{color:"#D4D4D4"},children:"             "}),e(l.span,{style:{color:"#6A9955"},children:"# https://example.com/"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"│"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#DCDCAA"},children:"└──"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:"layout.tsx"}),e(l.span,{style:{color:"#D4D4D4"},children:"            "}),e(l.span,{style:{color:"#6A9955"},children:"# This layout is used for all pages"})]})]})})]}),`
`,e(l.h4,{id:"example",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#example",children:e(l.span,{class:"icon icon-link"})}),"Example"]}),`
`,e(l.blockquote,{children:[`
`,e(l.p,{children:[`This template provides very permissive backward-compatible defaults.
It is highly recommended that you customize it to better suit your specific use case.
As this is an advanced topic, you should take a closer look at `,e(l.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP",children:"MDN"})," or ",e(l.a,{href:"https://web.dev/csp/",children:"web.dev"}),` to get a better understanding of CSP.
Please note that in dev mode the Vite scripts have no nonce and will report. For this reason, the example will not add csp in dev mode.`]}),`
`]}),`
`,e(l.div,{"data-rehype-pretty-code-fragment":"",children:[e(l.div,{"data-rehype-pretty-code-title":"","data-language":"typescript","data-theme":"default",children:"src/routes/plugin@csp.ts"}),e(l.pre,{"data-language":"typescript","data-theme":"default",children:e(l.code,{"data-language":"typescript","data-theme":"default",children:[e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#C586C0"},children:"type"}),e(l.span,{style:{color:"#D4D4D4"},children:" { "}),e(l.span,{style:{color:"#9CDCFE"},children:"RequestHandler"}),e(l.span,{style:{color:"#D4D4D4"},children:" } "}),e(l.span,{style:{color:"#C586C0"},children:"from"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"@builder.io/qwik-city"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" { "}),e(l.span,{style:{color:"#9CDCFE"},children:"isDev"}),e(l.span,{style:{color:"#D4D4D4"},children:" } "}),e(l.span,{style:{color:"#C586C0"},children:"from"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"@builder.io/qwik/build"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:" "}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"export"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#569CD6"},children:"const"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#DCDCAA"},children:"onRequest"}),e(l.span,{style:{color:"#D4D4D4"},children:": "}),e(l.span,{style:{color:"#4EC9B0"},children:"RequestHandler"}),e(l.span,{style:{color:"#D4D4D4"},children:" = "}),e(l.span,{style:{color:"#9CDCFE"},children:"event"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#569CD6"},children:"=>"}),e(l.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#C586C0"},children:"if"}),e(l.span,{style:{color:"#D4D4D4"},children:" ("}),e(l.span,{style:{color:"#9CDCFE"},children:"isDev"}),e(l.span,{style:{color:"#D4D4D4"},children:") "}),e(l.span,{style:{color:"#C586C0"},children:"return"}),e(l.span,{style:{color:"#D4D4D4"},children:"; "}),e(l.span,{style:{color:"#6A9955"},children:"// Will not return CSP headers in dev mode"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#569CD6"},children:"const"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#4FC1FF"},children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:" = "}),e(l.span,{style:{color:"#9CDCFE"},children:"Date"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#DCDCAA"},children:"now"}),e(l.span,{style:{color:"#D4D4D4"},children:"()."}),e(l.span,{style:{color:"#DCDCAA"},children:"toString"}),e(l.span,{style:{color:"#D4D4D4"},children:"("}),e(l.span,{style:{color:"#B5CEA8"},children:"36"}),e(l.span,{style:{color:"#D4D4D4"},children:"); "}),e(l.span,{style:{color:"#6A9955"},children:"// Your custom nonce logic here"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#9CDCFE"},children:"event"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#9CDCFE"},children:"sharedMap"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#DCDCAA"},children:"set"}),e(l.span,{style:{color:"#D4D4D4"},children:"("}),e(l.span,{style:{color:"#CE9178"},children:'"@nonce"'}),e(l.span,{style:{color:"#D4D4D4"},children:", "}),e(l.span,{style:{color:"#9CDCFE"},children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#569CD6"},children:"const"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#4FC1FF"},children:"csp"}),e(l.span,{style:{color:"#D4D4D4"},children:" = ["})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`default-src 'self' 'unsafe-inline'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`font-src 'self'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`img-src 'self' 'unsafe-inline' data:`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`script-src 'self' 'unsafe-inline' https: 'nonce-"}),e(l.span,{style:{color:"#569CD6"},children:"${"}),e(l.span,{style:{color:"#9CDCFE"},children:"nonce"}),e(l.span,{style:{color:"#569CD6"},children:"}"}),e(l.span,{style:{color:"#CE9178"},children:"' 'strict-dynamic'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`style-src 'self' 'unsafe-inline'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`frame-src 'self' 'nonce-"}),e(l.span,{style:{color:"#569CD6"},children:"${"}),e(l.span,{style:{color:"#9CDCFE"},children:"nonce"}),e(l.span,{style:{color:"#569CD6"},children:"}"}),e(l.span,{style:{color:"#CE9178"},children:"'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`object-src 'none'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#CE9178"},children:"`base-uri 'self'`"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"  ];"})}),`
`,e(l.span,{class:"line",children:" "}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#9CDCFE"},children:"event"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#9CDCFE"},children:"headers"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#DCDCAA"},children:"set"}),e(l.span,{style:{color:"#D4D4D4"},children:"("}),e(l.span,{style:{color:"#CE9178"},children:'"Content-Security-Policy"'}),e(l.span,{style:{color:"#D4D4D4"},children:", "}),e(l.span,{style:{color:"#9CDCFE"},children:"csp"}),e(l.span,{style:{color:"#D4D4D4"},children:"."}),e(l.span,{style:{color:"#DCDCAA"},children:"join"}),e(l.span,{style:{color:"#D4D4D4"},children:"("}),e(l.span,{style:{color:"#CE9178"},children:'"; "'}),e(l.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"};"})})]})})]}),`
`,e(l.h3,{id:"add-it-to-the-service-worker-as-well",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#add-it-to-the-service-worker-as-well",children:e(l.span,{class:"icon icon-link"})}),"Add it to the service worker as well"]}),`
`,e(l.div,{"data-rehype-pretty-code-fragment":"",children:[e(l.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"src/root.ts"}),e(l.pre,{"data-language":"tsx","data-theme":"default",children:e(l.code,{"data-language":"tsx","data-theme":"default",children:[e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" { "}),e(l.span,{style:{color:"#9CDCFE"},children:"component$"}),e(l.span,{style:{color:"#D4D4D4"},children:", "}),e(l.span,{style:{color:"#9CDCFE"},children:"useServerData"}),e(l.span,{style:{color:"#D4D4D4"},children:" } "}),e(l.span,{style:{color:"#C586C0"},children:"from"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"@builder.io/qwik"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#9CDCFE"},children:"QwikCityProvider"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#9CDCFE"},children:"RouterOutlet"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#9CDCFE"},children:"ServiceWorkerRegister"}),e(l.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"} "}),e(l.span,{style:{color:"#C586C0"},children:"from"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"@builder.io/qwik-city"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" { "}),e(l.span,{style:{color:"#9CDCFE"},children:"RouterHead"}),e(l.span,{style:{color:"#D4D4D4"},children:" } "}),e(l.span,{style:{color:"#C586C0"},children:"from"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"./components/router-head/router-head"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:" "}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"import"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#CE9178"},children:'"./global.css"'}),e(l.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,e(l.span,{class:"line",children:" "}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"export"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#C586C0"},children:"default"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#DCDCAA"},children:"component$"}),e(l.span,{style:{color:"#D4D4D4"},children:"(() "}),e(l.span,{style:{color:"#569CD6"},children:"=>"}),e(l.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,e(l.span,{class:"line line--highlighted",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#569CD6"},children:"const"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#4FC1FF"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:" = "}),e(l.span,{style:{color:"#DCDCAA"},children:"useServerData"}),e(l.span,{style:{color:"#D4D4D4"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"string"}),e(l.span,{style:{color:"#D4D4D4"},children:" | "}),e(l.span,{style:{color:"#4EC9B0"},children:"undefined"}),e(l.span,{style:{color:"#D4D4D4"},children:">("}),e(l.span,{style:{color:"#CE9178"},children:'"'}),e(l.span,{style:{color:"#CE9178"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#CE9178"},children:'"'}),e(l.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#C586C0"},children:"return"}),e(l.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"QwikCityProvider"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"      "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"head"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"        "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"meta"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},children:"charSet"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#CE9178"},children:'"utf-8"'}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#808080"},children:"/>"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"        "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"link"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},children:"rel"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#CE9178"},children:'"manifest"'}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},children:"href"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#CE9178"},children:'"/manifest.json"'}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#808080"},children:"/>"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"        "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"RouterHead"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#808080"},children:"/>"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"      "}),e(l.span,{style:{color:"#808080"},children:"</"}),e(l.span,{style:{color:"#569CD6"},children:"head"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"      "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"body"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},children:"lang"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#CE9178"},children:'"en"'}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"        "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"RouterOutlet"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#808080"},children:"/>"})]}),`
`,e(l.span,{class:"line line--highlighted",children:[e(l.span,{style:{color:"#D4D4D4"},children:"        "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"ServiceWorkerRegister"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#569CD6"},children:"{"}),e(l.span,{style:{color:"#9CDCFE"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#569CD6"},children:"}"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#808080"},children:"/>"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"      "}),e(l.span,{style:{color:"#808080"},children:"</"}),e(l.span,{style:{color:"#569CD6"},children:"body"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#808080"},children:"</"}),e(l.span,{style:{color:"#4EC9B0"},children:"QwikCityProvider"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),`
`,e(l.h3,{id:"custom-scripts",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#custom-scripts",children:e(l.span,{class:"icon icon-link"})}),"Custom scripts"]}),`
`,e(l.p,{children:["If you have custom script tags that you need to add the nonce to, you can use the ",e(l.code,{children:"useServerData"})," hook to get the nonce from the server and add it to your script tags."]}),`
`,e(l.div,{"data-rehype-pretty-code-fragment":"",children:[e(l.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"src/components/some-component.tsx"}),e(l.pre,{"data-language":"tsx","data-theme":"default",children:e(l.code,{"data-language":"tsx","data-theme":"default",children:[e(l.span,{class:"line",children:[e(l.span,{style:{color:"#C586C0"},children:"export"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#C586C0"},children:"default"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#DCDCAA"},children:"component$"}),e(l.span,{style:{color:"#D4D4D4"},children:"(() "}),e(l.span,{style:{color:"#569CD6"},children:"=>"}),e(l.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,e(l.span,{class:"line line--highlighted",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#569CD6"},children:"const"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#4FC1FF"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:" = "}),e(l.span,{style:{color:"#DCDCAA"},children:"useServerData"}),e(l.span,{style:{color:"#D4D4D4"},children:"<"}),e(l.span,{style:{color:"#4EC9B0"},children:"string"}),e(l.span,{style:{color:"#D4D4D4"},children:" | "}),e(l.span,{style:{color:"#4EC9B0"},children:"undefined"}),e(l.span,{style:{color:"#D4D4D4"},children:">("}),e(l.span,{style:{color:"#CE9178"},children:'"'}),e(l.span,{style:{color:"#CE9178"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#CE9178"},children:'"'}),e(l.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"  "}),e(l.span,{style:{color:"#C586C0"},children:"return"}),e(l.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"div"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line line--highlighted",children:[e(l.span,{style:{color:"#D4D4D4"},children:"      "}),e(l.span,{style:{color:"#808080"},children:"<"}),e(l.span,{style:{color:"#569CD6"},children:"script"}),e(l.span,{style:{color:"#D4D4D4"},children:" "}),e(l.span,{style:{color:"#9CDCFE"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#D4D4D4"},children:"="}),e(l.span,{style:{color:"#569CD6"},children:"{"}),e(l.span,{style:{color:"#9CDCFE"},class:"word",children:"nonce"}),e(l.span,{style:{color:"#569CD6"},children:"}"}),e(l.span,{style:{color:"#808080"},children:">"}),e(l.span,{style:{color:"#D4D4D4"},children:'alert("Hello world")'}),e(l.span,{style:{color:"#808080"},children:"</"}),e(l.span,{style:{color:"#569CD6"},children:"script"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:[e(l.span,{style:{color:"#D4D4D4"},children:"    "}),e(l.span,{style:{color:"#808080"},children:"</"}),e(l.span,{style:{color:"#569CD6"},children:"div"}),e(l.span,{style:{color:"#808080"},children:">"})]}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,e(l.span,{class:"line",children:e(l.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),`
`,e(l.h2,{id:"validate-your-csp",children:[e(l.a,{"aria-hidden":"true",tabindex:"-1",href:"#validate-your-csp",children:e(l.span,{class:"icon icon-link"})}),"Validate your CSP"]}),`
`,e(l.p,{children:["There is a great tool to validate your CSP: ",e(l.a,{href:"https://csp-evaluator.withgoogle.com/",children:"https://csp-evaluator.withgoogle.com/"})]})]})}function a(n={}){const{wrapper:l}=n.components||{};return l?e(l,Object.assign({},n,{children:e(r,n)})):r(n)}const D=()=>s(c,{children:s(a,{},3,null)},3,"txFxgDK9");export{D as default,h as frontmatter,d as head,i as headings};
